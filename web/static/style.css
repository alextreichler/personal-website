:root {
    /* --- Earth & Logic Theme (Light) --- */
    --bg-color: #fdfcf8;      /* Warm Off-White */
    --card-bg: #ffffff;       /* Pure White */
    --text-color: #2d2d2d;    /* Soft Charcoal */
    --text-light: #5a5a5a;    /* Lighter Charcoal for secondary text */
    --accent-color: #e76f51;  /* Burnt Orange */
    --accent-hover: #e05e3f;
    --border-color: #e0e0e0;
    --shadow-color: rgba(0, 0, 0, 0.05);
    --header-bg: rgba(253, 252, 248, 0.85); /* Glassy Light */
    --code-bg: #f3f2ef;
    --code-block-bg: #2d2d2d;
    
    --radius-sm: 8px;
    --radius-md: 12px;
    
    --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    --font-serif: 'Merriweather', Georgia, Cambria, "Times New Roman", Times, serif;
}

/* Dark Theme Variables - Applied via media query OR .dark-mode class */
body.dark-mode {
    --bg-color: #1a1a1a;      /* Deep Charcoal */
    --card-bg: #2d2d2d;       /* Slightly lighter Charcoal */
    --text-color: #f0f0f0;    /* Light Grey */
    --text-light: #b0b0b0;    /* Muted Grey */
    --accent-color: #e76f51;  /* Burnt Orange (same accent) */
    --accent-hover: #e05e3f;
    --border-color: #404040;
    --shadow-color: rgba(0, 0, 0, 0.3);
    --header-bg: rgba(26, 26, 26, 0.85); /* Glassy Dark */
    --code-bg: #333333;
    --code-block-bg: #111111;
}

/* Retro Theme Variables - Light 80s Pop (Memphis) */
body.retro-mode {
    --bg-color: #fcf5ff;      /* Very Light Lavender/Pink */
    --card-bg: #ffffff;
    --text-color: #2b1055;    /* Deep Purple */
    --text-light: #755c99;
    --accent-color: #ff0055;  /* Hot Pink */
    --accent-hover: #00e5ff;  /* Cyan */
    --border-color: #2b1055;  /* Dark borders for contrast */
    --shadow-color: #00e5ff;  /* Hard Cyan Shadow */
    --header-bg: rgba(252, 245, 255, 0.95);
    --code-bg: #f3e5f5;
    --code-block-bg: #2b1055; /* Dark purple block */
    
    --radius-sm: 0px; /* Sharp corners */
    --radius-md: 0px;
    
    --font-sans: 'Courier New', Courier, monospace;
    --font-serif: 'Times New Roman', Times, serif;
}

/* Retro Mode specific overrides for that 80s hard-edge look */
body.retro-mode .post-list-item,
body.retro-mode button,
body.retro-mode .site-header nav a:not(.site-logo-link),
body.retro-mode input,
body.retro-mode textarea,
body.retro-mode select {
    box-shadow: 4px 4px 0px var(--shadow-color) !important;
    border: 2px solid var(--border-color) !important;
    transition: all 0.2s ease;
}

body.retro-mode .post-list-item:hover,
body.retro-mode button:hover,
body.retro-mode .site-header nav a:not(.site-logo-link):hover {
    box-shadow: 6px 6px 0px var(--accent-color) !important;
    transform: translate(-2px, -2px);
    background-color: var(--card-bg) !important; /* Keep bg white on hover */
    color: var(--accent-color) !important;
}

@media (prefers-color-scheme: dark) {
    :root {
        /* Default to dark if system pref, unless overridden by specific light class (not impl yet)
           For now, we rely on JS to toggle class. If JS fails, system pref logic below applies
           BUT we want the class to win.
           Actually, the simplest way is to have the class define the vars.
           If we want system pref to be default, we can leave this, but the class needs to use !important or be more specific?
           CSS Variables cascade. body.dark-mode selector is more specific than :root in media query? No, :root is pseudo-class.
           Let's just duplicate the vars into body.dark-mode for manual override.
        */
        --bg-color: #1a1a1a;
        --card-bg: #2d2d2d;
        --text-color: #f0f0f0;
        --text-light: #b0b0b0;
        --accent-color: #e76f51;
        --accent-hover: #e05e3f;
        --border-color: #404040;
        --shadow-color: rgba(0, 0, 0, 0.3);
    }
}

*, *::before, *::after {

body {
    font-family: var(--font-sans);
    background-color: var(--bg-color);
    color: var(--text-color);
    line-height: 1.7;
    margin: 0;
    padding: 0; /* Remove body padding here, container will handle it */
    -webkit-font-smoothing: antialiased;
    position: relative; /* For z-index context */
    
    /* Sticky Footer Layout */
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* Main Layout Container */
body > .container {
    flex: 1;
    display: flex;
    flex-direction: column;
    width: 100%; /* Ensure it takes full width */
}

main {
    flex: 1;
    width: 100%;
    animation: fadeInUp 0.6s ease-out forwards;
}

/* Background Animation */
.background-animation {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    overflow: hidden;
    background-color: var(--bg-color);
}

.orb {
    position: absolute;
    border-radius: 50%;
    filter: blur(120px); /* Increased blur */
    opacity: 0.08; /* Even more subtle */
    animation: drift 40s infinite alternate ease-in-out; /* Slower animation */
}

/* ... (orb-1 and orb-2 definitions stay, drift keyframes stay) ... */

/* Micro-Animations */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(15px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Animated Link Underline (for text links) */
.content p a {
    position: relative;
    text-decoration: none;
    color: var(--text-color);
    font-weight: 600;
    background-image: linear-gradient(var(--accent-color), var(--accent-color));
    background-position: 0% 100%;
    background-repeat: no-repeat;
    background-size: 100% 2px;
    transition: background-size 0.3s;
}

.content p a:hover {
    background-size: 100% 100%; /* Full highlight on hover */
    color: white;
}

/* Refined Card Hover */
.post-list-item {
    /* ... existing styles ... */
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s ease;
}


.orb-1 {
    width: 70vw;
    height: 70vw;
    top: -20%;
    left: -20%;
    background: radial-gradient(circle, var(--accent-color), transparent 70%); /* Accent (Orange) now top-left */
    animation-duration: 45s;
}

.orb-2 {
    width: 60vw;
    height: 60vw;
    bottom: -20%;
    right: -20%;
    background: radial-gradient(circle, #ffb700, transparent 70%); /* Brighter Gold now bottom-right */
    animation-duration: 50s;
    animation-delay: -10s;
}

@keyframes drift {
    0% { transform: translate(0, 0) scale(1) rotate(0deg); }
    33% { transform: translate(100px, 50px) scale(1.2) rotate(10deg); }
    66% { transform: translate(-50px, 100px) scale(0.9) rotate(-5deg); }
    100% { transform: translate(20px, -40px) scale(1.1) rotate(5deg); }
}

/* Status Labels */
.status-published {
    color: #fff; /* White text for contrast */
    background-color: #10b981; /* Emerald Green */
    padding: 4px 10px;
    border-radius: 20px; /* Pill shape */
    font-weight: 600;
    font-size: 0.85rem;
    display: inline-block;
    min-width: 80px; /* Ensure consistent width */
    text-align: center;
}
.status-draft {
    color: #fff; /* White text for contrast */
    background-color: #ea580c; /* Darker Orange/Rust */
    padding: 4px 10px;
    border-radius: 20px; /* Pill shape */
    font-weight: 600;
    font-size: 0.85rem;
    display: inline-block;
    min-width: 80px; /* Ensure consistent width */
    text-align: center;
}

/* Layout Container - now wraps main content only */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px; /* Horizontal padding only, header/footer handle vertical */
}

/* Centered Content Column for Readability - Relaxed for wider screens */
.home-content,
.post-layout {
    /* Removed max-width: 800px restriction */
    width: 100%;
}

/* Header & Nav */
.site-header {
    width: 100%;
    background: rgba(255, 255, 255, 0.8); /* Fallback */
    background: var(--header-bg); /* defined below in variables */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    color: var(--text-color);
    padding: 20px 0;
    margin-bottom: 40px;
    box-shadow: 0 1px 0 rgba(0,0,0,0.05);
    position: sticky;
    top: 0;
    z-index: 100;
    transition: background-color 0.3s ease;
}

/* Hero Section */
.hero {
    text-align: center;
    padding: 60px 20px 80px;
    max-width: 800px;
    margin: 0 auto;
}

.hero h1 {
    font-size: 3.5rem;
    font-weight: 800;
    letter-spacing: -0.03em;
    margin-bottom: 20px;
    background: linear-gradient(135deg, var(--text-color) 0%, var(--text-light) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero p {
    font-size: 1.25rem;
    color: var(--text-light);
    line-height: 1.6;
}

/* Rich Typography for Content */
.content blockquote {
    border-left: 4px solid var(--accent-color);
    margin: 1.5em 0;
    padding: 1em 20px 1em 25px;
    background: var(--code-bg); /* Reuse code bg for subtle contrast */
    font-style: italic;
    border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    color: var(--text-color);
}

.content code {
    background-color: var(--code-bg);
    padding: 0.2em 0.4em;
    border-radius: 4px;
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    font-size: 0.9em;
}

.content pre {
    background: var(--code-block-bg);
    color: #f8f8f2; /* Always light text in code blocks */
    padding: 20px;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
    overflow-x: auto;
    margin: 2em 0;
    box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
}

.content pre code {
    background: transparent;
    padding: 0;
    color: inherit;
}

.site-header nav a:not(.site-logo-link) {
    display: inline-block;
    padding: 8px 20px;
    background-color: var(--card-bg);
    /* Remove border: 1px solid var(--border-color); */
    border-radius: 50px; /* Pill shape */
    color: var(--text-color);
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    font-size: 0.85rem;
    transition: all 0.3s ease;
    text-decoration: none;
    
    /* 3D Effect */
    box-shadow: 
        0 3px 6px var(--shadow-color),
        0 1px 3px rgba(0, 0, 0, 0.08);
    transform: translateY(0);
    position: relative;
    z-index: 1;
}

/* ... keyframes sunRays ... */

.site-header nav a:not(.site-logo-link):hover {
    background-color: var(--accent-color);
    color: #ffffff;
    transform: translateY(-3px) scale(1.02);
    /* Apply the sun rays animation */
    animation: sunRays 1.5s infinite;
}

.site-header nav a:not(.site-logo-link):active {
    transform: translateY(-1px) scale(0.98);
    animation: none; /* Stop rays on click */
}

/* Logo specific styles */
.site-logo-link {
    display: block;
    color: var(--text-color);
    transition: opacity 0.2s ease;
    text-decoration: none;
}

.site-logo-link:hover {
    opacity: 0.8;
}

.site-logo-link svg {
    display: block;
}



@keyframes postHighlightGlow {
    0% {
        box-shadow: 
            0 4px 8px var(--shadow-color), /* Keep existing shadow */
            0 0 0 0 rgba(231, 111, 81, 0.3); /* Subtle accent glow start */
    }
    50% {
        box-shadow: 
            0 4px 8px var(--shadow-color),
            0 0 0 5px rgba(231, 111, 81, 0.1); /* Glow expands and fades */
    }
    100% {
        box-shadow: 
            0 4px 8px var(--shadow-color),
            0 0 0 0 rgba(231, 111, 81, 0); /* Glow fades out */
    }
}

/* Post List Item Hover */
.post-list-item:hover {
    transform: translateY(-2px); /* Lift slightly */
    border-color: var(--accent-color); /* Highlight border */
    animation: postHighlightGlow 1.5s ease-out infinite; /* Apply subtle glow */
}

/* Nav inside header needs to be within its own container */
.site-header .container nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* New CSS for right-aligned nav links */
.site-header .container nav .nav-right-links {
    display: flex;
    align-items: center;
    gap: 15px; /* Spacing between links */
}

/* Mobile Responsiveness for Nav */
@media (max-width: 600px) {
    .site-header .container nav {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px; /* Spacing between logo and menu items */
    }

    .site-header .container nav .nav-right-links {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
}


.site-logo {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-color); /* Main text color */
    text-decoration: none;
    padding: 0; /* No button padding */
    background: none; /* No button background */
    border: none; /* No button border */
    box-shadow: none; /* No button shadow */
    transform: none; /* No button transform */
    transition: none; /* No button transition */
}


nav a {
    text-decoration: none;
    color: var(--text-color);
    font-weight: 600;
    font-size: 1.05rem;
    transition: color 0.2s ease;
}

nav a:hover {
    color: var(--accent-color);
}

/* Typography */
h1, h2, h3 {
    margin-top: 0;
    line-height: 1.2;
    letter-spacing: -0.02em;
}

h1 { font-size: 2.5rem; margin-bottom: 1rem; }
h2 { font-size: 1.75rem; margin-bottom: 1.5rem; }
h3 { font-size: 1.25rem; margin-bottom: 0.5rem; }

a {
    color: var(--accent-color);
    text-decoration: none;
    transition: color 0.2s;
}

a:hover {
    color: var(--accent-hover);
}

/* About Section */
.about {
    font-size: 1.1rem;
    color: var(--text-light);
    margin-bottom: 60px;
}

/* Post List */
.post-card-link {
    display: block;
    text-decoration: none;
    color: inherit;
    margin-bottom: 30px;
}

.post-card-link:hover {
    color: inherit;
}

.post-card-link:last-child {
    margin-bottom: 0;
}

.post-list-item {
    padding: 25px 30px;
    background-color: transparent; /* Cleaner look */
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    /* Removed shadow for a flatter, more modern look, adding it back on hover */
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
}

.post-list-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 25px -5px var(--shadow-color);
    border-color: var(--accent-color);
    background-color: var(--card-bg);
}

.post-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.post-list-item h3 {
    margin: 0; /* Remove default margin */
    font-size: 1.4rem;
    flex: 1; /* Allow title to take available space */
    padding-right: 20px; /* Space between title and date */
    transition: color 0.2s ease;
}

.post-card-link:hover .post-list-item h3 {
    color: var(--accent-color);
}

.post-date {
    font-size: 0.95rem;
    color: var(--text-light);
    white-space: nowrap; /* Prevent date from wrapping */
    font-weight: 500;
}

/* Tags */
.tags {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.tag {
    background-color: var(--code-bg);
    color: var(--text-light);
    font-size: 0.75rem;
    padding: 4px 8px;
    border-radius: 4px;
    text-decoration: none;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 600;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.tag:hover {
    background-color: var(--accent-color);
    color: #fff;
}

/* Single Post View */
.content {
    font-family: var(--font-serif); /* Serif for long form reading */
    font-size: 1.125rem;
}

.content img {
    max-width: 100%;
    border-radius: var(--radius-sm);
    margin: 20px 0;
}

.content pre {
    background: var(--card-bg);
    padding: 20px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-color);
    overflow-x: auto;
}

/* Forms & Admin */
input, textarea, select {
    display: block;
    width: 100%;
    padding: 12px;
    margin-bottom: 20px;
    border: 1px solid var(--border-color);
    background: var(--card-bg);
    color: var(--text-color);
    border-radius: var(--radius-sm);
    font-family: inherit;
    box-sizing: border-box;
}

button {
    background-color: var(--text-color);
    color: var(--bg-color);
    padding: 12px 24px;
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s;
}

button:hover {
    opacity: 0.9;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 20px;
    background: var(--card-bg);
    border-radius: var(--radius-sm);
    overflow: hidden;
}

th, td {
    padding: 16px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

th {
    font-weight: 600;
    background-color: rgba(0,0,0,0.02);
}

/* Footer */
footer {
    margin-top: auto;
    border-top: 1px solid var(--border-color);
    width: 100%;
    background-color: var(--bg-color); /* Ensure background matches body */
}

footer .container {
    padding-top: 40px;
    padding-bottom: 20px;
    text-align: center;
    color: var(--text-light);
    margin: 0 auto;
    max-width: 1200px;
    padding-left: 20px;
    padding-right: 20px;
}

/* Utilities */
.btn-danger-link {
    background: none;
    border: none;
    padding: 0;
    color: #dc2626; /* Red-600 */
    text-decoration: none;
    cursor: pointer;
    font-weight: 500;
    transition: color 0.2s;
}

.btn-danger-link:hover {
    color: #b91c1c; /* Red-700 */
    text-decoration: underline;
}

/* --- EasyMDE Overrides --- */

/* Toolbar Container */
.editor-toolbar {
    background-color: var(--card-bg) !important;
    border-color: var(--border-color) !important;
    opacity: 1 !important;
}

/* Toolbar Buttons */
.editor-toolbar button {
    background: transparent !important;
    border: 1px solid transparent !important;
    color: var(--text-color) !important; /* Icon color */
    box-shadow: none !important;
    width: 30px !important;
    height: 30px !important;
    border-radius: var(--radius-sm) !important;
}

.editor-toolbar button:hover,
.editor-toolbar button.active {
    background-color: var(--bg-color) !important;
    border-color: var(--border-color) !important;
    color: var(--accent-color) !important;
}

.editor-toolbar i.fa {
    color: inherit !important;
}

/* Tooltip (The actual popup text) */
.editor-toolbar .editor-tooltip {
    background-color: var(--text-color) !important;
    color: var(--bg-color) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 4px !important;
    font-family: var(--font-sans) !important;
    font-size: 12px !important;
    padding: 5px 10px !important;
    z-index: 10000 !important;
}

/* Tooltip Arrow */
.editor-toolbar .editor-tooltip:before {
    border-top-color: var(--text-color) !important;
}

/* Editor Area - Base Styles */
.CodeMirror {
    background-color: var(--card-bg) !important;
    color: var(--text-color) !important;
    border-color: var(--border-color) !important;
    border-radius: 0 0 var(--radius-sm) var(--radius-sm) !important;
    font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace !important;
    font-size: 1rem !important;
    line-height: 1.6 !important;
    padding: 10px !important;
}

/* Ensure fullscreen mode works */
.editor-toolbar.fullscreen,
.CodeMirror.fullscreen {
    z-index: 9999 !important;
    background-color: var(--bg-color) !important;
}

.CodeMirror-cursor {
    border-left: 2px solid var(--accent-color) !important;
}

.CodeMirror-selected {
    background: rgba(231, 111, 81, 0.2) !important;
}

.editor-preview {
    background-color: var(--card-bg) !important;
    color: var(--text-color) !important;
}

.editor-statusbar {
    color: var(--text-light) !important;
}

/* Pagination */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 50px;
    font-size: 1.05rem;
}

.pagination-link {
    color: var(--text-color);
    text-decoration: none;
    font-weight: 600;
    transition: color 0.2s;
    border-bottom: 2px solid transparent;
}

.pagination-link:hover {
    color: var(--accent-color);
    border-color: var(--accent-color);
}

.pagination-info {
    color: var(--text-light);
}